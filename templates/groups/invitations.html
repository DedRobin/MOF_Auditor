{% extends "base.html" %}

{% load crispy_forms_filters %}

{% block title %}MOF-Auditor{% endblock %}

{% block content %}

    <div class="container">
        <h1>Invitations</h1>

        <table class="table">
            <thead>
            <tr>
                <th scope="col">â„–</th>
                <th scope="col">From who</th>
                <th scope="col">To a group</th>
                <th scope="col">Accepting</th>
            </tr>
            </thead>
            <tbody>

            {% for invitation in invitations %}
                <tr>
                    <th scope="row">{{ forloop.counter }}</th>
                    <td>
                        {{ invitation.from_who.profile.first_name }}
                        {{ invitation.from_who.profile.last_name }}
                        ({{ invitation.from_who }})
                    </td>
                    <td>{{ invitation.to_a_group }}</td>
                    <td>
                        <div class="d-flex flex-row">
                            <form method="POST">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-primary me-3">Apply</button>
                                <input type="hidden" name="group_pub_id" value="{{ invitation.to_a_group.pub_id }}">
                            </form>
                            <form method="POST">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-danger">Refuse</button>
                                <input type="hidden" name="group_pub_id" value="{{ invitation.to_a_group.pub_id }}">
                                <input type="hidden" name="to_delete" value="True">
                            </form>
                        </div>
                    </td>
                </tr>

            {% endfor %}
            </tbody>
        </table>


    </div>
{% endblock %}